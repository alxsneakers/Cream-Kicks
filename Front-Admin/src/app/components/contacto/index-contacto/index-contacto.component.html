<!-- MENU NAV -->
<app-nav></app-nav>


<!-- Tabla de cuponess -->

<section>
  <div class="container-fluid pt-5 px-4">
    <div class="row my-5 ">
      <div class=" col-xl-10 col-lg-9 col-md-8 ml-auto ">
        <div class="card">

          <!-- Buscador -->
          <div class="col-md-12 py-4 w-100">

            <div class="input-group">
              <input type="text" class="form-control search" [(ngModel)]="mensajesFiltrados"
                placeholder="Buscar por email">
              <button class="btn btn-white search-btn"> <i class="fa fa-search"></i></button>
            </div>

          </div>

          <!-- mensaje card -->
          <div class="col-md-12 pb-4">
            <div class="panel-default "
              *ngFor="let item of (contactos$ | async) | filterMensajes: mensajesFiltrados; index as i;">
              <div class="panel-heading">

                <button class="btn w-100 mb-2 text-left mensaje" data-toggle="collapse"
                  [attr.data-target]="'#test' + i">

                  <button class="btn btn-primary-outline" (click)="this.cerrarMensaje(item._id)">
                    <i *ngIf="item.estado == 'Abierto'" class="bi bi-envelope-fill fa-lg mr-3 mensajeActivo"></i>
                    <i *ngIf="item.estado == 'Cerrado'" class="bi bi-envelope fa-lg mr-3 mensajeActivo"></i>
                  </button>

                  <a href="mailto:{{item.email}}">{{item.email}}</a>
                  <p>Asunto: {{item.asunto}}</p>
                  <!-- <p>{{item.estado}}</p> -->


                  <!-- <p>Nombre: {{item.nombre}}</p> -->
                  <p>Fecha: {{item.creado | date }}</p>
                  <!-- <mat-card-subtitle>{{item.estado}}</mat-card-subtitle> -->

                </button>
              </div>

              <div class="panel-collapse collapse" id="test{{i}}">

                <div class="card-body">
                  <p>mensaje: <br></p>
                  {{item.mensaje}}

                </div>
              </div>
            </div>
          </div>
        </div>

      </div>

    </div>
  </div>
</section>